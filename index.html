<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; }
        
        .player-container { 
            width: 95%; max-width: 550px; aspect-ratio: 16/9; background: #000; 
            position: relative; border-radius: 12px; overflow: hidden; border: 1px solid #333;
        }

        /* Real Content (Blur) */
        #realMedia, #realPhoto { width: 100%; height: 100%; object-fit: contain; filter: blur(50px); position: absolute; top:0; left:0; transition: 0.5s; }

        /* YouTube Ad Video */
        #adVideo { width: 100%; height: 100%; object-fit: cover; position: absolute; top:0; left:0; display: none; z-index: 15; background: #000; }

        /* YT Play Button Overlay */
        #playOverlay { position: absolute; top:0; left:0; width:100%; height:100%; background: rgba(0,0,0,0.4); display: flex; justify-content: center; align-items: center; z-index: 20; cursor: pointer; }
        .yt-red-btn { width: 68px; height: 48px; background: #FF0000; border-radius: 12px; display: flex; justify-content: center; align-items: center; position: relative; }
        .yt-red-btn::after { content: ''; border-left: 18px solid #fff; border-top: 11px solid transparent; border-bottom: 11px solid transparent; margin-left: 5px; }

        /* REAL SKIP AD BUTTON (YouTube Style) */
        #skipUI { position: absolute; bottom: 50px; right: 0; display: none; z-index: 30; }
        .yt-skip-box { 
            background: rgba(0, 0, 0, 0.6); border: 1px solid rgba(255,255,255,0.3); color: #fff; 
            padding: 10px 15px; font-size: 14px; border-right: none; cursor: default;
            display: flex; align-items: center; border-top-left-radius: 2px; border-bottom-left-radius: 2px;
        }
        .active-skip { cursor: pointer !important; background: rgba(0, 0, 0, 0.9) !important; font-weight: bold; }

        /* ADMIN & COPY SECTION */
        .admin-panel { padding: 20px; background: #111; margin-top: 20px; border-radius: 10px; width: 90%; max-width: 400px; border: 1px solid #333; }
        .input-group { display: flex; flex-direction: column; gap: 10px; }
        input { padding: 12px; background: #1a1a1a; border: 1px solid #444; color: #fff; border-radius: 5px; font-size: 14px; }
        .btn { background: #ff0000; color: #fff; border: none; padding: 12px; font-weight: bold; cursor: pointer; border-radius: 5px; }
        .copy-btn { background: #00ffa3; color: #000; margin-top: 5px; }
    </style>
</head>
<body>

<div id="userPanel" style="display:none; width: 100%; flex-direction: column; align-items: center;">
    <div class="player-container">
        <video id="realMedia" playsinline loop muted></video>
        <img id="realPhoto" style="display:none;">

        <video id="adVideo" playsinline muted>
            <source src="https://www.w3schools.com/html/mov_bbb.mp4" type="video/mp4">
        </video>

        <div id="playOverlay" onclick="startAd()">
            <div class="yt-red-btn"></div>
        </div>

        <div id="skipUI">
            <div class="yt-skip-box" id="skipBox">
                <span id="skipText">Ad will end in 5</span>
            </div>
        </div>
    </div>
    <p style="color:#888; font-size:12px; margin-top:10px;">Click Play button to start</p>
</div>

<div id="loginBox" class="admin-panel">
    <h3>Admin Login</h3>
    <div class="input-group">
        <input type="password" id="adminPass" placeholder="Password">
        <button class="btn" onclick="login()">Login</button>
    </div>
</div>

<div id="uploadBox" class="admin-panel" style="display:none;">
    <h3>Upload & Generate</h3>
    <div class="input-group">
        <input type="file" id="fileIn">
        <button class="btn" onclick="upload()">Upload File</button>
        <div id="resultArea" style="display:none; margin-top:10px;">
            <input type="text" id="finalUrl" readonly style="width:90%; border-color:#00ffa3; color:#00ffa3;">
            <button class="btn copy-btn" onclick="copyLink()">üìã Copy Link</button>
        </div>
    </div>
</div>

<script>
    const CLOUD = "dn10tsupa"; 
    const PRESET = "dn10tsupa";
    const params = new URLSearchParams(window.location.search);
    const m = params.get('m');

    if (m) {
        document.getElementById('loginBox').style.display = 'none';
        document.getElementById('userPanel').style.display = 'flex';
        if (m.match(/\.(mp4|mov|webm|m4v)/i)) {
            document.getElementById('realMedia').src = m;
        } else {
            document.getElementById('realMedia').style.display = 'none';
            document.getElementById('realPhoto').src = m;
            document.getElementById('realPhoto').style.display = 'block';
        }
    }

    function startAd() {
        window.open('https://www.google.com', '_blank'); // Adsterra Earning
        document.getElementById('playOverlay').style.display = "none";
        const ad = document.getElementById('adVideo');
        ad.style.display = "block";
        ad.play();

        document.getElementById('skipUI').style.display = "block";
        let s = 5;
        let timer = setInterval(() => {
            s--;
            if(s > 0) {
                document.getElementById('skipText').innerText = "Ad will end in " + s;
            } else {
                clearInterval(timer);
                const box = document.getElementById('skipBox');
                box.classList.add('active-skip');
                box.innerHTML = '<span onclick="finishAd()">Skip Ad ‚è©</span>';
            }
        }, 1000);
    }

    function finishAd() {
        document.getElementById('adVideo').pause();
        document.getElementById('adVideo').style.display = "none";
        document.getElementById('skipUI').style.display = "none";
        
        document.getElementById('realMedia').style.filter = "blur(0px)";
        document.getElementById('realPhoto').style.filter = "blur(0px)";
        
        const vid = document.getElementById('realMedia');
        if(vid.src) { vid.muted = false; vid.play(); }
    }

    // Admin Functions
    function login() {
        if(document.getElementById('adminPass').value === "1234") {
            document.getElementById('loginBox').style.display = 'none';
            document.getElementById('uploadBox').style.display = 'block';
        }
    }

    async function upload() {
        const file = document.getElementById('fileIn').files[0];
        if(!file) return alert("File chuno!");
        const type = file.type.startsWith('video') ? 'video' : 'image';
        const fd = new FormData();
        fd.append("file", file); fd.append("upload_preset", PRESET);

        const btn = document.querySelector("#uploadBox .btn");
        btn.innerText = "Uploading...";

        const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD}/${type}/upload`, {method:"POST", body:fd});
        const data = await res.json();
        
        if(data.secure_url) {
            const link = window.location.origin + window.location.pathname + "?m=" + data.secure_url;
            document.getElementById('finalUrl').value = link;
            document.getElementById('resultArea').style.display = "block";
        }
        btn.innerText = "Upload File";
    }

    function copyLink() {
        const copyText = document.getElementById("finalUrl");
        copyText.select();
        copyText.setSelectionRange(0, 99999);
        navigator.clipboard.writeText(copyText.value);
        alert("Link Copy Ho Gaya!");
    }
</script>

<script type='text/javascript' src='//pl25732282.effectivegatecpm.com/6d/5a/e2/6d5ae25a8b0c2974cabf7d073c7cc9f8.js'></script>
</body>
</html>
