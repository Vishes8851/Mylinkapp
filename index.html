    // Is login function ko replace karein
    function login() { 
        let inputPass = document.getElementById('pass').value;
        let savedPass = localStorage.getItem("adminPass") || "1234"; 

        // Agar aapne badla hua password bhool gaye hain, toh "1234" hamesha kaam karega
        if(inputPass === savedPass || inputPass === "1234") { 
            document.getElementById('loginBox').style.display='none'; 
            document.getElementById('uploadBox').style.display='block'; 
        } else { 
            alert("Galat Password! Default '1234' try karein."); 
        }
    }

    // Is upload function mein bhi "Copy" fix hai
    async function upload() {
        const file = document.getElementById('f').files[0];
        if(!file) return alert("Pehle video select karein!");
        const btn = document.getElementById('upBtn');
        btn.disabled = true; btn.innerText = "ðŸš€ GENERATING...";

        const url = `https://api.cloudinary.com/v1_1/${CLOUD}/video/upload`;
        const chunkSize = 6000000; 
        const totalChunks = Math.ceil(file.size / chunkSize);
        const uniqueId = "vid_" + Date.now();

        for (let i = 0; i < totalChunks; i++) {
            const start = i * chunkSize;
            const end = Math.min(start + chunkSize, file.size);
            const chunk = file.slice(start, end);
            const fd = new FormData();
            fd.append("file", chunk);
            fd.append("upload_preset", PRESET);
            const range = `bytes ${start}-${end - 1}/${file.size}`;
            
            try {
                const res = await fetch(url, { method: "POST", body: fd, headers: { "X-Unique-Upload-Id": uniqueId, "Content-Range": range } });
                const data = await res.json();
                if (i === totalChunks - 1) {
                    setTimeout(() => {
                        if(data.secure_url) {
                            const link = window.location.origin + window.location.pathname + "?m=" + data.secure_url;
                            document.getElementById('finalLink').value = link;
                            document.getElementById('copyBox').style.display = "block";
                            btn.style.display = "none"; // Copy button aa jayega
                        }
                    }, 2000); 
                }
            } catch (e) { btn.innerText = "RETRY"; btn.disabled = false; return alert("Upload failed!"); }
        }
    }
