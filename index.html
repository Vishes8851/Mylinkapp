<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Manager - Fast Unlock</title>
    <style>
        body { background: #000; color: #fff; font-family: sans-serif; text-align: center; margin: 0; padding: 10px; }
        .box { background: #111; padding: 20px; border-radius: 15px; border: 2px solid #00ffa3; margin-top: 15px; }
        img, video { width: 100%; border-radius: 12px; filter: blur(35px); margin-top: 10px; }
        .btn { background: #00ffa3; color: #000; border: none; padding: 15px; border-radius: 10px; width: 100%; font-weight: bold; font-size: 18px; margin-top: 15px; cursor: pointer; }
        input[type="file"], input[type="password"] { padding: 10px; margin: 10px 0; width: 80%; border-radius: 5px; border: 1px solid #444; background: #222; color: #fff; }
        #timerSection { display: none; margin-top: 20px; padding: 15px; border: 1px dashed #555; }
        #countdown { font-size: 40px; color: #00ffa3; font-weight: bold; }
    </style>
</head>
<body>

<div id="userPanel" class="box" style="display:none;">
    <h3 id="head" style="color: #00ffa3;">ğŸ‘¨â€ğŸ’» Admin Panel (No Ads)</h3>
    <img id="p" style="display:none;"> 
    <video id="v" style="display:none;" playsinline loop muted></video>

    <button id="unBtn" class="btn" style="background:#0084ff; color:#fff;" onclick="startTimer()">UNLOCK & VIEW (10s Ad)</button>

    <div id="timerSection">
        <p>Vigyapan Load Ho Raha Hai...</p>
        <div id="countdown">10</div>
    </div>

    <button id="finalBtn" class="btn" style="display:none;" onclick="showMedia()">âœ… VIEW NOW / DEKHEIN</button>
</div>

<div id="loginBox" class="box">
    <h3>ğŸ” Admin Login</h3>
    <input type="password" id="pass" placeholder="Password (1234)">
    <button class="btn" onclick="checkPass()">Login</button>
</div>

<div id="adminPanel" class="box" style="display:none;">
    <h3 style="color: #00ffa3;">ğŸ‘¨â€ğŸ’» Admin Panel (No Ads)</h3>
    <input type="file" id="fileInput">
    <button class="btn" onclick="upload()">Upload Media</button>
    <div id="linkResult" style="margin-top:20px; display:none; background:#000; padding:10px; border-radius:10px; border:1px dashed #555;">
        <p id="finalLink" style="font-size:12px; color:#00ffa3; word-break:break-all;"></p>
        <button class="btn" style="width:auto; padding:5px 20px;" onclick="copy()">Copy</button>
    </div>
</div>

<script>
    const CLOUD_NAME = "dn10tsupa"; 
    const UPLOAD_PRESET = "dn10tsupa"; 

    // Link detect karna
    const urlParams = new URLSearchParams(window.location.search);
    const m = urlParams.get('m');

    if (m) {
        document.getElementById('loginBox').style.display = 'none';
        document.getElementById('userPanel').style.display = 'block';
        if (m.match(/\.(mp4|mov|webm)/i)) {
            const v = document.getElementById('v'); v.src = m; v.style.display = 'block';
        } else {
            const p = document.getElementById('p'); p.src = m; p.style.display = 'block';
        }
    }

    function checkPass() {
        if(document.getElementById('pass').value === "1234") {
            document.getElementById('loginBox').style.display = 'none';
            document.getElementById('adminPanel').style.display = 'block';
        }
    }

    async function upload() {
        const file = document.getElementById('fileInput').files[0];
        if(!file) return alert("File chuno!");
        const btn = document.querySelector("#adminPanel .btn");
        btn.innerText = "Uploading...";
        
        const formData = new FormData();
        formData.append("file", file);
        formData.append("upload_preset", UPLOAD_PRESET);
        const type = file.type.startsWith('video') ? 'video' : 'image';

        const res = await fetch(`https://api.cloudinary.com/v1_1/${CLOUD_NAME}/${type}/upload`, { method: "POST", body: formData });
        const data = await res.json();
        
        if(data.secure_url) {
            const myUrl = window.location.origin + window.location.pathname + "?m=" + data.secure_url;
            document.getElementById('finalLink').innerText = myUrl;
            document.getElementById('linkResult').style.display = 'block';
        }
        btn.innerText = "Upload Media";
    }

    function startTimer() {
        window.open('https://www.google.com', '_blank'); // Ad Link
        document.getElementById('unBtn').style.display = 'none';
        document.getElementById('timerSection').style.display = 'block';
        let s = 10;
        let t = setInterval(() => {
            s--;
            document.getElementById('countdown').innerText = s;
            if(s <= 0) {
                clearInterval(t);
                document.getElementById('timerSection').style.display = 'none';
                document.getElementById('finalBtn').style.display = 'block';
            }
        }, 1000);
    }

    function showMedia() {
        document.getElementById('p').style.filter = "blur(0px)";
        document.getElementById('v').style.filter = "blur(0px)";
        if(document.getElementById('v').src) {
            document.getElementById('v').muted = false;
            document.getElementById('v').play();
        }
        document.getElementById('finalBtn').style.display = 'none';
    }

    function copy() {
        navigator.clipboard.writeText(document.getElementById('finalLink').innerText);
        alert("Link Copy Ho Gaya!");
    }
</script>

<script type='text/javascript' src='//pl25732282.effectivegatecpm.com/6d/5a/e2/6d5ae25a8b0c2974cabf7d073c7cc9f8.js'></script>

</body>
</html>
